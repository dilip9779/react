(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{43:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(2),c=n.n(a),r=n(18),i=n.n(r),l=n(3),o=n(6),d=n(5),u=n(4),h=c.a.createContext(),j=h.Provider,b=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleUpdate=function(t){e.context.handleUpdate(t,e.name.value,e.email.value)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.context.get_users()}},{key:"render",value:function(){var e,t,n=this;return e=this.context.all_users.map((function(e){var t=e.id,a=e.user_name,c=e.user_email;return!0===e.isEditing?Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:Object(s.jsx)("input",{className:"form-control",type:"text",ref:function(e){return n.name=e},defaultValue:a})}),Object(s.jsx)("td",{children:Object(s.jsx)("input",{className:"form-control",type:"email",ref:function(e){return n.email=e},defaultValue:c})}),Object(s.jsxs)("td",{children:[Object(s.jsx)("button",{className:"btn btn-success mr-2",onClick:function(){return n.handleUpdate(t)},children:"Save"}),Object(s.jsx)("button",{onClick:function(){return n.context.cancelEdit(t)},className:"btn btn-light",children:"Cancel"})]})]},t):Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:a}),Object(s.jsx)("td",{children:c}),Object(s.jsxs)("td",{children:[Object(s.jsx)("button",{className:"btn btn-dark mr-2",onClick:function(){return n.context.editMode(t)},children:"Edit"}),Object(s.jsx)("button",{onClick:function(){return n.context.handleDelete(t)},className:"btn btn-danger",children:"Delete"})]})]},t)})),t=this.context.all_users.length>0?Object(s.jsxs)("table",{className:"table table-striped table-bordered",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{children:"Name"}),Object(s.jsx)("th",{children:"Email"}),Object(s.jsx)("th",{children:"Actions"})]})}),Object(s.jsx)("tbody",{children:e})]}):Object(s.jsxs)("div",{className:"alert alert-light",role:"alert",children:[Object(s.jsx)("h4",{className:"alert-heading",children:"No User Found!"}),Object(s.jsx)("hr",{}),Object(s.jsx)("p",{children:"Please Insert Some Users."})]}),Object(s.jsx)(s.Fragment,{children:t})}}]),n}(a.Component);b.contextType=h;var m=b,p=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).insertUser=function(t){e.context.insertUser(t,e.username.value,e.useremail.value)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(s.jsx)("form",{onSubmit:this.insertUser,children:Object(s.jsxs)("div",{className:"form-row",children:[Object(s.jsxs)("div",{className:"form-group col-sm-6",children:[Object(s.jsx)("label",{className:"font-weight-bold",children:"Name"}),Object(s.jsx)("input",{type:"text",name:"username",ref:function(t){return e.username=t},className:"form-control",placeholder:"Name"})]}),Object(s.jsxs)("div",{className:"form-group col-sm-6",children:[Object(s.jsx)("label",{className:"font-weight-bold",children:"Email"}),Object(s.jsx)("input",{type:"email",name:"useremail",ref:function(t){return e.useremail=t},className:"form-control",placeholder:"Email"})]}),Object(s.jsx)("div",{className:"form-group col-sm-12 text-right",children:Object(s.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add user"})})]})})}}]),n}(a.Component);p.contextType=h;var f=p,x=n(19),O=n(8),v=n(7),g=n.n(v),N=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e={all_users:this.state.users,get_users:this.fetchUsers,editMode:this.editMode,cancelEdit:this.cancelEdit,handleUpdate:this.handleUpdate,handleDelete:this.handleDelete,insertUser:this.insertUser};return Object(s.jsx)(j,{value:e,children:Object(s.jsx)("div",{className:"container-fluid bg-light",children:Object(s.jsx)("div",{className:"container p-5",children:Object(s.jsxs)("div",{className:"card shadow-sm",children:[Object(s.jsx)("h1",{className:"card-header text-center text-uppercase text-muted",children:"React WITH PHP"}),Object(s.jsx)("div",{className:"card-body",children:Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-md-12",children:Object(s.jsx)(f,{})}),Object(s.jsx)("div",{className:"col-md-12",children:Object(s.jsx)(m,{})})]})})]})})})})}}]),n}(function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={users:[]},e.fetchUsers=function(){g.a.get("http://10.154.3.108:8090/react/api/all-users.php").then((function(t){var n=t.data;console.log(n.users,n),1===n.success&&e.setState({users:n.users.reverse()})})).catch((function(e){console.log(e)}))},e.editMode=function(t){var n=e.state.users.map((function(e){return e.id===t?(e.isEditing=!0,e):(e.isEditing=!1,e)}));e.setState({users:n})},e.cancelEdit=function(t){var n=e.state.users.map((function(e){return e.id===t?(e.isEditing=!1,e):e}));e.setState({users:n})},e.handleUpdate=function(t,n,s){g.a.post("http://10.154.3.108:8090/react/api/update-user.php",{id:t,user_name:n,user_email:s}).then((function(a){var c=a.data;if(console.log(c),1===c.success){var r=e.state.users.map((function(e){return e.id===t?(e.user_name=n,e.user_email=s,e.isEditing=!1,e):e}));e.setState({users:r})}else alert(c.msg)})).catch((function(e){console.log(e)}))},e.handleDelete=function(t){var n=e.state.users.filter((function(e){return e.id!==t}));g.a.post("http://10.154.3.108:8090/react/api/delete-user.php",{id:t}).then((function(t){var s=t.data;1===s.success?e.setState({users:n}):alert(s.msg)})).catch((function(e){console.log(e)}))},e.insertUser=function(t,n,s){t.preventDefault(),t.persist(),g.a.post("http://10.154.3.108:8090/react/api/add-user.php",{user_name:n,user_email:s}).then(function(e){var a=e.data;1===a.success?(this.setState({users:[{id:a.id,user_name:n,user_email:s}].concat(Object(x.a)(this.state.users))}),alert(a.msg),t.target.reset()):alert(a.msg)}.bind(Object(O.a)(e))).catch((function(e){console.log(e)}))},e}return n}(c.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(s.jsx)(a.StrictMode,{children:Object(s.jsx)(N,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[43,1,2]]]);
//# sourceMappingURL=main.05c86a42.chunk.js.map