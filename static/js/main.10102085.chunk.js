(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{43:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s(2),a=s.n(c),r=s(18),i=s.n(r),l=s(3),o=s(6),d=s(5),u=s(4),h=a.a.createContext(),j=h.Provider,m=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).handleUpdate=function(t){e.context.handleUpdate(t,e.name.value,e.email.value)},e}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.context.get_users()}},{key:"render",value:function(){var e,t,s=this;return e=this.context.all_users.map((function(e){var t=e.id,c=e.user_name,a=e.user_email;return!0===e.isEditing?Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("input",{className:"form-control",type:"text",ref:function(e){return s.name=e},defaultValue:c})}),Object(n.jsx)("td",{children:Object(n.jsx)("input",{className:"form-control",type:"email",ref:function(e){return s.email=e},defaultValue:a})}),Object(n.jsxs)("td",{children:[Object(n.jsx)("button",{className:"btn btn-success mr-2",onClick:function(){return s.handleUpdate(t)},children:"Save"}),Object(n.jsx)("button",{onClick:function(){return s.context.cancelEdit(t)},className:"btn btn-light",children:"Cancel"})]})]},t):Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:c}),Object(n.jsx)("td",{children:a}),Object(n.jsxs)("td",{children:[Object(n.jsx)("button",{className:"btn btn-dark mr-2",onClick:function(){return s.context.editMode(t)},children:"Edit"}),Object(n.jsx)("button",{onClick:function(){return s.context.handleDelete(t)},className:"btn btn-danger",children:"Delete"})]})]},t)})),t=this.context.all_users.length>0?Object(n.jsxs)("table",{className:"table table-striped table-bordered",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Email"}),Object(n.jsx)("th",{children:"Actions"})]})}),Object(n.jsx)("tbody",{children:e})]}):Object(n.jsxs)("div",{className:"alert alert-light",role:"alert",children:[Object(n.jsx)("h4",{className:"alert-heading",children:"No User Found!"}),Object(n.jsx)("hr",{}),Object(n.jsx)("p",{children:"Please Insert Some Users."})]}),Object(n.jsx)(n.Fragment,{children:t})}}]),s}(c.Component);m.contextType=h;var b=m,p=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).insertUser=function(t){e.context.insertUser(t,e.username.value,e.useremail.value)},e}return Object(o.a)(s,[{key:"render",value:function(){var e=this;return Object(n.jsx)("form",{onSubmit:this.insertUser,children:Object(n.jsxs)("div",{className:"form-row",children:[Object(n.jsxs)("div",{className:"form-group col-sm-6",children:[Object(n.jsx)("label",{className:"font-weight-bold",children:"Name"}),Object(n.jsx)("input",{type:"text",name:"username",ref:function(t){return e.username=t},className:"form-control",placeholder:"Name"})]}),Object(n.jsxs)("div",{className:"form-group col-sm-6",children:[Object(n.jsx)("label",{className:"font-weight-bold",children:"Email"}),Object(n.jsx)("input",{type:"email",name:"useremail",ref:function(t){return e.useremail=t},className:"form-control",placeholder:"Email"})]}),Object(n.jsx)("div",{className:"form-group col-sm-12 text-right",children:Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add user"})})]})})}}]),s}(c.Component);p.contextType=h;var f=p,x=s(19),O=s(8),v=s(7),g=s.n(v),N=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){var e={all_users:this.state.users,get_users:this.fetchUsers,editMode:this.editMode,cancelEdit:this.cancelEdit,handleUpdate:this.handleUpdate,handleDelete:this.handleDelete,insertUser:this.insertUser};return Object(n.jsx)(j,{value:e,children:Object(n.jsx)("div",{className:"container-fluid bg-light",children:Object(n.jsx)("div",{className:"container p-5",children:Object(n.jsxs)("div",{className:"card shadow-sm",children:[Object(n.jsx)("h1",{className:"card-header text-center text-uppercase text-muted",children:"React WITH PHP"}),Object(n.jsx)("div",{className:"card-body",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-md-12",children:Object(n.jsx)(f,{})}),Object(n.jsx)("div",{className:"col-md-12",children:Object(n.jsx)(b,{})})]})})]})})})})}}]),s}(function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={users:[]},e.fetchUsers=function(){g.a.get("http://stocksgems.in/api/all-users.php").then((function(t){var s=t.data;console.log(s.users,s),1===s.success&&e.setState({users:s.users.reverse()})})).catch((function(e){console.log(e)}))},e.editMode=function(t){var s=e.state.users.map((function(e){return e.id===t?(e.isEditing=!0,e):(e.isEditing=!1,e)}));e.setState({users:s})},e.cancelEdit=function(t){var s=e.state.users.map((function(e){return e.id===t?(e.isEditing=!1,e):e}));e.setState({users:s})},e.handleUpdate=function(t,s,n){g.a.post("http://stocksgems.in/api/update-user.php",{id:t,user_name:s,user_email:n}).then((function(c){var a=c.data;if(console.log(a),1===a.success){var r=e.state.users.map((function(e){return e.id===t?(e.user_name=s,e.user_email=n,e.isEditing=!1,e):e}));e.setState({users:r})}else alert(a.msg)})).catch((function(e){console.log(e)}))},e.handleDelete=function(t){var s=e.state.users.filter((function(e){return e.id!==t}));g.a.post("http://stocksgems.in/api/delete-user.php",{id:t}).then((function(t){var n=t.data;1===n.success?e.setState({users:s}):alert(n.msg)})).catch((function(e){console.log(e)}))},e.insertUser=function(t,s,n){t.preventDefault(),t.persist(),g.a.post("http://stocksgems.in/api/add-user.php",{user_name:s,user_email:n}).then(function(e){var c=e.data;1===c.success?(this.setState({users:[{id:c.id,user_name:s,user_email:n}].concat(Object(x.a)(this.state.users))}),alert(c.msg),t.target.reset()):alert(c.msg)}.bind(Object(O.a)(e))).catch((function(e){console.log(e)}))},e}return s}(a.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(n.jsx)(c.StrictMode,{children:Object(n.jsx)(N,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[43,1,2]]]);
//# sourceMappingURL=main.10102085.chunk.js.map